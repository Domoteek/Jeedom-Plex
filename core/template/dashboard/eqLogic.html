<div class="eqLogic eqLogic-widget noResize plex_widget plex" data-version="dashboard" style="overflow:hidden; height:320px; width: 220px; #background#" data-eqLogic_id="#id#" data-eqLogic_uid="#uid#">
<!-- Partie listes du Widget-->
<link rel="stylesheet" href="plugins/plex/core/template/dashboard/css/gauche.css" />
<link rel="stylesheet" href="plugins/plex/core/template/dashboard/css/style.css" />
	<span class="statusCmd" style="position : absolute;bottom : 3px;left : 3px;width : 30px;color: #404040 ;z-index: 1030;"></span>
	<span class="cmd cmd-widget" data-cmd_id="#volume_id#" style="display:none;"></span>
	<div class="media_panel">
    	<div class="media_Title"></div>
    	<div class="media_Information">
			<ul class="nav nav-tabs nav-xs" role="tablist">
				<li><a href="#ListeMedia" class="ListeMedia" role="tab" data-toggle="tab">Liste</a></li>
				<li><a href="#Filtre" class="Filtre" role="tab" data-toggle="tab">Filtre</a></li>
				<li><a href="#Detail" class="Detail" role="tab" data-toggle="tab">Detail</a></li>
				<li><a href="#Playback" class="Playback" role="tab" data-toggle="tab">Audio</a></li>
				<li><a href="#Cast" class="Cast" role="tab" data-toggle="tab">Casting</a></li>
				<li><a href="#Poster" class="Poster" role="tab" data-toggle="tab">Poster</a></li>
			</ul>
			<div class="tab-content">    
				<div class="tab-pane active" id="ListeMedia">
					<ul class="noRefresh" style="text-decoration: none; cursor:default; color: #404040 ; font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size:14px;font-weight:bold;" ></ul>
				</div>  	
				<div class="tab-pane" id="Filtre">
				    <div class="form-group">
							<a class="btn btn-xs bt_PlexFilter " data-filtre="Unwatched">Non vue</a>
							<a class="btn btn-xs bt_PlexFilter " data-filtre="RecentlyReleased">Récemment modifié</a>
							<a class="btn btn-xs bt_PlexFilter " data-filtre="RecentlyAdded">Récemment ajouté</a>
							<a class="btn btn-xs bt_PlexFilter " data-filtre="RecentlyViewed">Récemment vue</a>
							<!--a class="btn btn-xs bt_PlexFilter " data-filtre="OnDeck">OnDeck</a-->
							<a class="btn btn-xs bt_PlexFilter " data-filtre="ByYear">Par année</a>
							<!--a class="btn btn-xs bt_PlexFilter " data-filtre="ByDecade">ByDecade</a-->
							<!--a class="btn btn-xs bt_PlexFilter " data-filtre="ByContentRating">ByContentRating</a-->
							<!--a class="btn btn-xs bt_PlexFilter " data-filtre="ByResolution">ByResolution</a-->
							<!--a class="btn btn-xs bt_PlexFilter " data-filtre="ByFirstCharacter">ByFirstCharacter</a-->
							<a class="btn btn-xs bt_PlexFilter " data-filtre="ByTitle">Par titre</a>
							<a class="btn btn-xs bt_PlexFilter " data-filtre="ByCollection">Par collection</a>
							<a class="btn btn-xs bt_PlexFilter " data-filtre="ByGenre">Par genre</a>
							<a class="btn btn-xs bt_PlexFilter " data-filtre="ByDirector">Par réalisateur</a>
							<a class="btn btn-xs bt_PlexFilter " data-filtre="ByActor">Par Acteur</a>
							<a class="btn btn-xs bt_PlexGroupFiltre" data-filtre="artists">Par artiste</a>
							<a class="btn btn-xs bt_PlexGroupFiltre" data-filtre="Albums">Par albums</a>
							<a class="btn btn-xs bt_PlexFilter " data-filtre="search">Autre</a>
							<a class="btn btn-xs bt_PlexFilter " data-filtre=""><i class="fa fa-times"></i></a>
					</div>
					<div class="form-group" id="in_search" >
						<input class="form-control" placeholder="Rechercher"value="">
						<a class="btn btn-success" id="bt_search"><i class="fa fa-search"></i></a>
					</div>
				</div>  	
				<div class="tab-pane" id="Detail">
					<h2 class="item-year"></h2>
					<div class="item-genre metadata-tags"></div>
					<div class="rating-container">
						<span class="rating">
							<i class="star-icon glyphicon star"></i>
							<i class="star-icon glyphicon star"></i>
							<i class="star-icon glyphicon star"></i>
							<i class="star-icon glyphicon star"></i>
							<i class="star-icon glyphicon star"></i>
						</span>
					</div>
					<div class="summary-container">
						<div class="summary">
							<p class="item-summary metadata-summary" style="max-height: 192px;"></p>
						</div>
					</div>	
				</div>
				<div class="tab-pane" id="Playback">
					<div class="item-audio metadata-tags metadata-tags-separator">
						<span class="metadata-label">Audio</span>
						<span class="dropdown" id="audio-dropdown"></span>
					</div>
					<div class="item-subtitles metadata-tags">
						<span class="metadata-label">Sous-titres</span>
						<span class="dropdown" id="subtitles-dropdown"></span>
					</div>	
				</div>
				<div class="tab-pane" id="Cast">
					<div class="item-director metadata-tags">
						<span class="metadata-label">Réalisateur</span>
					</div>
					<div class="item-writer metadata-tags">
					  <span class="metadata-label">Scénariste</span> 
					</div>
					<div class="item-cast metadata-tags">
					  <span class="metadata-label">Acteurs</span> 
					</div>
				</div>
				<div class="tab-pane" id="Poster">
					<img class="affiche_premiere_plex"/>
				</div>
			</div>		
        </div>
        <div class="media_Library"> </div>
		<img class="sections_droite_liste tooltips noRefresh" src="plugins/plex/core/template/dashboard/images/chevron.png" title="Listes" onClick="listefermer#uid#()"/>
	</div>
	<!-- Partie telecommande du Widget-->
	<div class="telecommande_plex_widget">
		<!--div class="btm-telecommande-power-plex cmd noRefresh tooltips" data-cmd_id="#cmd_shutdown_id#" title="Power"></div>
		<div class="btm-telecommande-reboot-plex cmd noRefresh tooltips" data-cmd_id="#cmd_reboot_id#" title="Reboot"></div-->
		<div class="commande_haute_plex_deux">
		</div>
		<div class="commande_principal_plex">
			#back#
			#contextMenu#
			#select#
			#moveLeft#
			#moveUp#
			#moveRight#
			#moveDown#
		</div>
		<img class="working_droite_telecommande noRefresh" src="plugins/plex/core/template/dashboard/images/chevron.png" title="Télécommande" onClick="telecommandefermer#uid#()"/>
	</div>
	<!-- Partie Haute du Widget-->
	<div class="haut_plex_widget">
    	<a style="text-decoration: none; color: #404040; font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size:12px;font-weight:bold;">#viewOffset#</a>
    	<a href="#eqLink#" class="titre_haut_plex_widget"> #name# </a>
	<a style="text-decoration: none; color: #404040; font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size:12px;font-weight:bold;" title="Durée"></a>
	<img class="working_droite tooltips noRefresh" src="plugins/plex/core/template/dashboard/images/chevron.png" title="Télécommande" onClick="telecommande#uid#()"/>
	<img class="sections_gauche tooltips noRefresh" src="plugins/plex/core/template/dashboard/images/chevron.png" onclick="liste#uid#()" title="Informations"/>
		<div class="jaquette_plex"></div>
		<div class="titre_plex">
			<a class="gros_titre_plex tooltips noRefresh" style="text-decoration: none; cursor:default;" title=""></a>
		</div><br/>
		<div class="titre_plex">
			<a class="petit_titre_plex tooltips noRefresh" style="text-decoration: none; cursor:default;top : 50px;" title=""></a>
		</div>
	</div>
	
	<!-- Partie basse du Widget-->
	<div class="bas_plex_widget" style="display:block;">
		<img src="plugins/plex/core/template/dashboard/images/sound.png" height="15px" width="15px" class="bouton_sup_volume" onclick="volume_plex#uid#('bouton')" />
		#stop#
		#stepBack#
		#toggleOSD#
		#skipPrevious#
		<div class="cercle_bas_plex_widget">
			#play#
			#pause#
		</div>
		#skipNext#
		#stepForward#
	</div>
	<div class="bas_plex_widget_volume" style="display:none;">
		<img src="plugins/plex/core/template/dashboard/images/working.png" height="15px" width="15px" class="bouton_sup_volume" onclick="volume_plex#uid#('volume')"/>
		<div class="volume_plex_widget">
		<div style="margin-top : 5px;" class="showinit">
			<div class="volume cmd noRefresh" data-cmd_id="#volume#" style="width: 180px;"></div>	
		</div>
	</div>
	<script type="text/javascript">
		var Media#uid#=jQuery.parseJSON('#media#');
		var Init=true;
		function telecommande#uid#(){
			$(".plex[data-eqLogic_uid=#uid#] .telecommande_plex_widget").animate({right:"0px"});
			$(".plex[data-eqLogic_uid=#uid#] .telecommande_plex_widget").attr("class","telecommande_plex_widget shadow_fenetre_plex");
			if ($(".plex[data-eqLogic_uid=#uid#] .media_panel").css("left") == "0px"){
				listefermer#uid#();
			}
		}
		function telecommandefermer#uid#(){
			$(".plex[data-eqLogic_uid=#uid#] .telecommande_plex_widget").animate({right:"-200px"});
			$(".plex[data-eqLogic_uid=#uid#] .telecommande_plex_widget").attr("class","telecommande_plex_widget");
		}
		// Partie liste ///
		function UpdateDetail#uid#(Data){
			//Mise a jours des etoiles		
			$('.plex[data-eqLogic_uid=#uid#] .item-summary').text(Data.Media.Summary);
			//$('.item-duration').text(SecondToDuration(Data.Media.Duration));
		
			if (typeof(Data.Media.Duration) != "undefined")
				$('.item-duration').text(SecondToDuration(Data.Media.Duration)).show();
			else
				$('.item-duration').hide();
			for (var i in Data.Media.Genre) {
				$('.plex[data-eqLogic_uid=#uid#] .item-genre .metadata-tags').append($('<a class="pivot-link">')
					.attr('href',Data.Media.Genre[i].Href)
					.text(Data.Media.Genre[i].Name));
			}
			for (var i in Data.Media.Realisateur) {
				$('.plex[data-eqLogic_uid=#uid#] .item-director .metadata-tags').append($('<span class="metadata-tag-list">')
					.append($('<a class="pivot-link">')
						.attr('href',Data.Media.Realisateur[i].Href)
						.text(Data.Media.Realisateur[i].Name)));
			}
			for (var i in Data.Media.Scenariste) {
				$('.plex[data-eqLogic_uid=#uid#] .item-writer .metadata-tags').append($('<span class="metadata-tag-list">')
					.append($('<a class="pivot-link">')
						.attr('href',Data.Media.Scenariste[i].Href)
						.text(Data.Media.Scenariste[i].Name)));
			}
			for (var i in Data.Media.Acteurs) {
				$('.plex[data-eqLogic_uid=#uid#] .item-cast .metadata-tags').append($('<span class="metadata-tag-list">')
					.append($('<a class="pivot-link">')
						.attr('href',Data.Media.Acteurs[i].Href)
						.text(Data.Media.Acteurs[i].Name)));
			}
			$('.plex[data-eqLogic_uid=#uid#] #audio-dropdown').text(Data.Media.Audio);
			$('.plex[data-eqLogic_uid=#uid#] #subtitles-dropdown').text(Data.Media.Subtitles);
			$('.plex[data-eqLogic_uid=#uid#] .studio-flag').attr('src',Data.Media.StudioFlag);
		}
		function UpdateList#uid#(Data){
			$('.plex[data-eqLogic_uid=#uid#] #ListeMedia ul').html('');
			$('.plex[data-eqLogic_uid=#uid#] .jaquette_plex').html('');
			for (var i in Data.Media) {
				$('.plex[data-eqLogic_uid=#uid#] #ListeMedia ul').append(
					$('<li>')
						.addClass('btm-media-plex')
						.attr('data-type_media',Data.Media[i].Type)
						.attr('data-id_media',i)//Data.Media[i].RatingKey)
						.text(Data.Media[i].Title));
				var ThumbMenu=$("<img>").addClass("affiche").attr('src','plugins/plex/core/php/Poster.php?url='+Data.Media[i].Poster)
					.attr('data-type_media',Data.Media[i].Type)
					.attr('title',Data.Media[i].Title)
					.hide();
				if(i==0){
					if (typeof(Data.Media[i].Duration) != "undefined")
						$('.plex[data-eqLogic_uid=#uid#] .time_haut_plex_widget').text(SecondToDuration(Data.Media[i].Duration)).show();
					else
						$('.plex[data-eqLogic_uid=#uid#] .time_haut_plex_widget').hide();
					$('.plex[data-eqLogic_uid=#uid#] .gros_titre_plex').attr('title',Data.Media[i].Title).text(Data.Media[i].Title);
					$('.plex[data-eqLogic_uid=#uid#] .petit_titre_plex').attr('title',Data.Media[i].Tagline).text(Data.Media[i].Tagline);
					ThumbMenu.addClass("affiche_premiere_plex").show();
				}
				if(i==1){
					ThumbMenu.addClass("affiche_next_plex").show();
				}
				$('.plex[data-eqLogic_uid=#uid#] .jaquette_plex').append(ThumbMenu);
			}
		}
		$('.plex[data-eqLogic_uid=#uid#]').on('click',".affiche", function() {
			$('.plex[data-eqLogic_uid=#uid#] .affiche').hide();
			$('.plex[data-eqLogic_uid=#uid#] .affiche').removeClass("affiche_premiere_plex");
			$('.plex[data-eqLogic_uid=#uid#] .affiche').removeClass("affiche_next_plex");
			$('.plex[data-eqLogic_uid=#uid#] .affiche').removeClass("affiche_prev_plex");
			$(this).addClass("affiche_premiere_plex").show();
			$(this).next().addClass("affiche_next_plex").show();
			$(this).prev().addClass("affiche_prev_plex").show();
			switch($('.plex[data-eqLogic_uid=#uid#] .btm-library-plex[data-lib_title="'+Media#uid#.Library+'"]').data('lib_type')){
				default:
					Media#uid#.Video=$(this).attr("title");
				break;
				case 'show':
					switch($(this).data('type_media')){
						case 'show':
							Media#uid#.Show=$(this).attr("title");
						break;
						case 'season':
							Media#uid#.Season=$(this).attr("title");
						break;
						case 'episode':
							Media#uid#.Episode=$(this).attr("title");
						break;
					}	
				break;
				case 'artist':
					if($(this).data('type_media')== 'album')
						Media#uid#.Album=$(this).attr("title");
					else	
						Media#uid#.Tarck=$(this).attr("title");
				break;
			}
			UpdateCmd('media', JSON.stringify(Media#uid#));
			UpdateInforamtion(Media#uid#);
		});
		function liste#uid#(){
			$(".plex[data-eqLogic_uid=#uid#] .media_panel").animate({left:"0px"});
			$(".plex[data-eqLogic_uid=#uid#] .media_panel").attr("class","media_panel shadow_fenetre_plex");
			if ($(".plex[data-eqLogic_uid=#uid#] .media_panel").css("right") == "0px"){
				telecommandefermer#uid#();
			}
		}
		function listefermer#uid#(){
			$(".plex[data-eqLogic_uid=#uid#] .media_panel").animate({left:"-200px"});
			$(".plex[data-eqLogic_uid=#uid#] .media_panel").attr("class","media_panel");
		}
		
		// fonction Pause et Play //
		if(#state# == 0)
		{
				$(".eqLogic[data-eqLogic_uid=#uid#] .pause_in_cercle").hide();
				$(".eqLogic[data-eqLogic_uid=#uid#] .play_in_cercle").show();
			} 
		else
		{
				$(".eqLogic[data-eqLogic_uid=#uid#] .pause_in_cercle").show();
				$(".eqLogic[data-eqLogic_uid=#uid#] .play_in_cercle").hide();
			}
		
		// fonction Musique ou Video ///
		$.ajax({
			type: "POST",
			timeout:8000, 
			url: "plugins/plex/core/ajax/plex.ajax.php",
			data: {
				Id:'#id#',
				action: "getLibrary",
			},
			dataType: 'json',
			error: function(request, status, error) {
				handleAjaxError(request, status, error);
			},
			success: function(data) { 
				if (data.state != 'ok') {
					$('#div_alert').showAlert({message: data.result, level: 'danger'});
					return;
				}
				if (data.result!=false)
				{
					for (var i in data.result) {
						switch(data.result[i].Type)
						{
							default:
							break;
							case 'movie':
								$('.plex[data-eqLogic_uid=#uid#] .media_Library').append($('<img class="btm-library-plex cursor noRefresh tooltips" src="plugins/plex/core/template/dashboard/images/cinema.png" data-lib_type="'+data.result[i].Type+'" data-lib_title="'+data.result[i].Title+'" title="'+data.result[i].Title+'" />'));
							break;
							case 'show':
								$('.plex[data-eqLogic_uid=#uid#] .media_Library').append($('<img class="btm-library-plex cursor noRefresh tooltips" src="plugins/plex/core/template/dashboard/images/tv.png" data-lib_type="'+data.result[i].Type+'" data-lib_title="'+data.result[i].Title+'" title="'+data.result[i].Title+'" />'));
							break;
							case 'artist':
								$('.plex[data-eqLogic_uid=#uid#] .media_Library').append($('<img class="btm-library-plex cursor noRefresh tooltips" src="plugins/plex/core/template/dashboard/images/music.png" data-lib_type="'+data.result[i].Type+'" data-lib_title="'+data.result[i].Title+'" title="'+data.result[i].Title+'" />'));
							break;
						}					
					}
					if (typeof(Media#uid#.Library) != "undefined" && Init)
						$('.plex[data-eqLogic_uid=#uid#] .btm-library-plex').first().trigger('click');
					else
						Init=false;
				}
			}
		});
        $('.plex[data-eqLogic_uid=#uid#]').on('click',".btm-library-plex", function() {				
			$('.plex[data-eqLogic_uid=#uid#] .ListeMedia').trigger('click');		
			$('.plex[data-eqLogic_uid=#uid#] .ListeMedia').show();
			$('.plex[data-eqLogic_uid=#uid#] .Filtre').show();
			$('.plex[data-eqLogic_uid=#uid#] .Detail').hide();
			$('.plex[data-eqLogic_uid=#uid#] .Playback').hide();
			$('.plex[data-eqLogic_uid=#uid#] .Cast').hide();
			$('.plex[data-eqLogic_uid=#uid#] .Poster').hide();
			if(!Init){
				Media#uid# = {};
				Media#uid#.Library=$(this).data('lib_title');
			}
			
			if (Media#uid#.Library!=''){
				$.ajax({
					type: "POST",
					timeout:8000, 
					url: "plugins/plex/core/ajax/plex.ajax.php",
					data: {
						Id:'#id#',
						action: "SearchMedia",
						Filtre:'',
						param:JSON.stringify(Media#uid#),
					},
					dataType: 'json',
					error: function(request, status, error) {
						handleAjaxError(request, status, error);
					},
					success: function(data) { 
						if (data.state != 'ok') {
							$('#div_alert').showAlert({message: data.result, level: 'danger'});
							return;
						}
						if (data.result!=false)
						{		
							UpdateList#uid#(data.result);	
							if ((typeof(Media#uid#.Video) != "undefined" || typeof(Media#uid#.Show) != "undefined" ||typeof(Media#uid#.Album) != "undefined") && Init)
								$('.plex[data-eqLogic_uid=#uid#] .btm-media-plex').first().trigger('click');
							else{
								Init=false;
								UpdateCmd('media', JSON.stringify(Media#uid#));
							}
						}
					}
				});
			}
		});
		$('.plex[data-eqLogic_uid=#uid#]').on('click',".btm-media-plex", function() {
			if (Init){
				var InitMedia = JSON.parse(JSON.stringify(Media#uid#));
				delete InitMedia.Episode;
				delete InitMedia.Tarck;
				UpdateInforamtion(InitMedia);
			}else{
				switch($('.plex[data-eqLogic_uid=#uid#] .btm-library-plex[data-lib_title="'+Media#uid#.Library+'"]').data('lib_type')){
					default:
						Media#uid#.Video=$(this).text();
					break;
					case 'show':
						switch($(this).data('type_media')){
							case 'show':
								Media#uid#.Show=$(this).text();
							break;
							case 'season':
								Media#uid#.Season=$(this).text();
							break;
							case 'episode':
								Media#uid#.Episode=$(this).text();
							break;
						}	
					break;
					case 'artist':
						if($(this).data('type_media')== 'album')
							Media#uid#.Album=$(this).text();
						else
							Media#uid#.Tarck=$(this).text();
					break;
				}
				UpdateCmd('media', JSON.stringify(Media#uid#));
			}
			UpdateInforamtion(Media#uid#);
			Init=false;
		});
		$('.plex[data-eqLogic_uid=#uid#]').on('click',".menu_plex", function() {
			if (!Init){
				switch($(this).text()){
					case Media#uid#.Library:
						Media#uid#='{}';
						Media#uid#.Library=$(this).text();
					break;
					case Media#uid#.Video:
						Media#uid#.Video=$(this).text();
					break;
					case Media#uid#.Show:
						Media#uid#.Show=$(this).text();
						delete Media#uid#.Season;
						delete Media#uid#.Episode;
					break;
					case Media#uid#.Season:
						Media#uid#.Season=$(this).text();
						delete Media#uid#.Episode;
					break;
					case Media#uid#.Episode:
						Media#uid#.Episode=$(this).text();
					break;
					case Media#uid#.Album:
						delete Media#uid#.Episode;
						Media#uid#.Album=$(this).text();
						delete Media#uid#.Tarck;
					break;
					case Media#uid#.Tarck:
						Media#uid#.Tarck=$(this).text();
					break;
				}
				UpdateCmd('media', JSON.stringify(Media#uid#));
				UpdateInforamtion(Media#uid#);
			}
		});
		function UpdateInforamtion(Media){
			if (Media!=''){
				$('.plex[data-eqLogic_uid=#uid#] .media_Title').html('');
				$.each(Media, function( key, value ) {
					if(key!="Library")
					$('.plex[data-eqLogic_uid=#uid#] .media_Title').append($('<a class="menu_plex">').text(value));
				});
				$.ajax({
					type: "POST",
					timeout:8000, 
					url: "plugins/plex/core/ajax/plex.ajax.php",
					data: {
						Id:'#id#',
						action: "SearchMedia",
						Filtre: 'ByTitle',
						param: JSON.stringify(Media),
					},
					dataType: 'json',
					error: function(request, status, error) {
						handleAjaxError(request, status, error);
					},
					success: function(data) { 
						if (data.state != 'ok') {
							$('#div_alert').showAlert({message: data.result, level: 'danger'});
							return;
						}
						if (data.result!=false)
						{	
							$('.plex[data-eqLogic_uid=#uid#] .tab-content').removeClass('active');	
							switch($('.plex[data-eqLogic_uid=#uid#] .btm-library-plex[data-lib_title="'+Media.Library+'"]').data('lib_type')){
								case 'movie':			
									$('.plex[data-eqLogic_uid=#uid#] .Detail').trigger('click');			
									$('.plex[data-eqLogic_uid=#uid#] .ListeMedia').hide();
									$('.plex[data-eqLogic_uid=#uid#] .Filtre').hide();
									$('.plex[data-eqLogic_uid=#uid#] .Detail').show();
									$('.plex[data-eqLogic_uid=#uid#] .Playback').show();
									$('.plex[data-eqLogic_uid=#uid#] .Cast').show();
									$('.plex[data-eqLogic_uid=#uid#] .Poster').show();
									UpdateDetail#uid#(data.result);
									break;
								case 'show':
									if (Media.Season == '' || typeof(Media.Season) == "undefined"){
										UpdateList#uid#(data.result);
										$('.plex[data-eqLogic_uid=#uid#] .ListeMedia').trigger('click');		
										$('.plex[data-eqLogic_uid=#uid#] .ListeMedia').show();
										$('.plex[data-eqLogic_uid=#uid#] .Filtre').hide();
										$('.plex[data-eqLogic_uid=#uid#] .Detail').show();
										$('.plex[data-eqLogic_uid=#uid#] .Playback').show();
										$('.plex[data-eqLogic_uid=#uid#] .Cast').show();
										$('.plex[data-eqLogic_uid=#uid#] .Poster').show();
									}
									else if (Media.Episode == '' || typeof(Media.Episode) == "undefined"){
										UpdateList#uid#(data.result);
										$('.plex[data-eqLogic_uid=#uid#] .ListeMedia').trigger('click');			
										$('.plex[data-eqLogic_uid=#uid#] .ListeMedia').show();
										$('.plex[data-eqLogic_uid=#uid#] .Filtre').hide();
										$('.plex[data-eqLogic_uid=#uid#] .Detail').show();
										$('.plex[data-eqLogic_uid=#uid#] .Playback').show();
										$('.plex[data-eqLogic_uid=#uid#] .Cast').show();
										$('.plex[data-eqLogic_uid=#uid#] .Poster').show();
									}
									else{
										UpdateDetail#uid#(data.result);
										$('.plex[data-eqLogic_uid=#uid#] .Detail').trigger('click');		
										$('.plex[data-eqLogic_uid=#uid#] .ListeMedia').show();
										$('.plex[data-eqLogic_uid=#uid#] .Filtre').hide();
										$('.plex[data-eqLogic_uid=#uid#] .Detail').show();
										$('.plex[data-eqLogic_uid=#uid#] .Playback').show();
										$('.plex[data-eqLogic_uid=#uid#] .Cast').show();
										$('.plex[data-eqLogic_uid=#uid#] .Poster').show();
										}
									break;
								case 'artist':
									if (Media.Tarck == '' || typeof(Media.Tarck) == "undefined"){
										UpdateList#uid#(data.result);
										$('.plex[data-eqLogic_uid=#uid#] .ListeMedia').trigger('click');			
										$('.plex[data-eqLogic_uid=#uid#] .ListeMedia').show();
										$('.plex[data-eqLogic_uid=#uid#] .Filtre').hide();
										$('.plex[data-eqLogic_uid=#uid#] .Detail').show();
										$('.plex[data-eqLogic_uid=#uid#] .Playback').show();
										$('.plex[data-eqLogic_uid=#uid#] .Cast').hide();
										$('.plex[data-eqLogic_uid=#uid#] .Poster').show();
										}
									else{
										UpdateDetail#uid#(data.result);
										$('.plex[data-eqLogic_uid=#uid#] .Detail').trigger('click');			
										$('.plex[data-eqLogic_uid=#uid#] .ListeMedia').hide();
										$('.plex[data-eqLogic_uid=#uid#] .Filtre').hide();
										$('.plex[data-eqLogic_uid=#uid#] .Detail').show();
										$('.plex[data-eqLogic_uid=#uid#] .Playback').show();
										$('.plex[data-eqLogic_uid=#uid#] .Cast').hide();
										$('.plex[data-eqLogic_uid=#uid#] .Poster').show();
										}
								break;
							}
						}
					}
				});
			}
		}
		function SecondToDuration(timeCount){	
			var heure=Math.floor(((timeCount/1000)/60)/60);
			var minute=Math.floor(((timeCount/1000)/60))-heure*60;
			var duration=heure+' h '+minute+' min ';
			return duration
		}	
		$(".plex[data-eqLogic_uid=#uid#] .slider.slider-horizontal").css('z-index',1);
		function volume_plex#uid#(bouton){
			if(bouton == 'bouton'){
				$(".plex[data-eqLogic_uid=#uid#] .bas_plex_widget_volume").css("display", "block");
				$(".plex[data-eqLogic_uid=#uid#] .bas_plex_widget").css("display", "none");
			}else if(bouton == 'volume'){
				$(".plex[data-eqLogic_uid=#uid#] .bas_plex_widget_volume").css("display", "none");
				$(".plex[data-eqLogic_uid=#uid#] .bas_plex_widget").css("display", "block");
			}
		}
		function UpdateCmd(logicalId, Valeur){
			$.ajax({
				type: "POST",
				timeout:8000, 
				url: "plugins/plex/core/ajax/plex.ajax.php",
				data: {
					action: "UpdateCommande",
					EqId:'#id#',
					CmdId:logicalId,
					value:Valeur,
				},
				dataType: 'json',
				error: function(request, status, error) {
					handleAjaxError(request, status, error);
				},
				success: function(data) { 
					if (data.state != 'ok') {
						$('#div_alert').showAlert({message: data.result, level: 'danger'});
						return;
					}
					if (data.result!=false)
					{			
					}
				}
			});
		}
		$('.plex[data-eqLogic_uid=#uid#]').on( 'click','.bt_PlexGroupFiltre', function() {		
	$('.bt_PlexGroupFiltre').removeClass('btn-primary');
	GroupFiltre=$(this).attr("data-filtre");
	$(this).addClass('btn-primary');
});
		$('.plex[data-eqLogic_uid=#uid#]').on( 'click','.bt_PlexFilter', function() {		
	$('.plex[data-eqLogic_uid=#uid#] .btn-primary').removeClass('btn-primary');
	Filtre=$(this).attr("data-filtre");
	$(this).addClass('btn-primary');
	switch(Filtre)
	{
		case 'Unwatched':
			$('.plex[data-eqLogic_uid=#uid#] #in_search').hide();
		break;case 'RecentlyReleased':
			$('.plex[data-eqLogic_uid=#uid#] #in_search').hide();
		break;
		case 'RecentlyAdded':
			$('.plex[data-eqLogic_uid=#uid#] #in_search').hide();
		break;
		case 'RecentlyViewed':
			$('.plex[data-eqLogic_uid=#uid#] #in_search').hide();
		break;
		case 'OnDeck':
			$('.plex[data-eqLogic_uid=#uid#] #in_search').hide();
		break;
		case 'UnwatchedShows':
			$('.plex[data-eqLogic_uid=#uid#] #in_search').hide();
		default:
			$('.plex[data-eqLogic_uid=#uid#] #in_search').show();
		break;
	}
});
	</script>
</div>
